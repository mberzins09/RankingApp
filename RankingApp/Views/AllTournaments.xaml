<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="RankingApp.Views.AllTournaments"
             xmlns:viewmodel="clr-namespace:RankingApp.ViewModels"
             xmlns:model="using:RankingApp.Models"
             x:DataType="viewmodel:AllTournamentsViewModel"
             Title="Rankings"
             Style="{StaticResource PrimaryContentPage}">
    <Grid Style="{StaticResource PrimaryGrid}" RowDefinitions="50, *" ColumnDefinitions="10, 100, *, 100, *, 100, 10">
        <ImageButton Grid.Column="1" Source="ranksnoborder.png" Clicked="ImageButtonRankings_Clicked" WidthRequest="60" HeightRequest="50"></ImageButton>
        <ImageButton Grid.Column="3" Source="gamesnoborder.png" Clicked="ImageButtonAllGames_Clicked" WidthRequest="60" HeightRequest="50"></ImageButton>
        <ImageButton Grid.Column="5" Source="plusnoborder.png" Clicked="ImageButtonAdd_Clicked" WidthRequest="60" HeightRequest="50"></ImageButton>

        <Grid Style="{StaticResource PrimaryGrid}" Grid.Row="2" Grid.ColumnSpan="7" RowDefinitions="40, *">
            <SearchBar Style="{StaticResource PrimarySearchBar}" x:Name="TournamentsSearchBar" TextChanged="TournamentsSearchBar_OnTextChanged"/>
            <ListView Grid.Row="1" Style="{StaticResource PrimaryListView}" x:Name ="ListViewTournaments" ItemsSource="{Binding Tournaments}" ItemSelected="ListViewTournaments_OnItemSelected">
                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="model:Tournament">
                        <ViewCell>
                            <VerticalStackLayout Style="{StaticResource PrimaryVertical}">
                                <Label Text ="{Binding Name}" Style="{StaticResource ListItemLabel}" FontSize="16" FontAttributes="Bold"/>
                                <Label Text ="{Binding TournamentDisplay}" Style="{StaticResource ListItemLabel}"/>
                            </VerticalStackLayout>
                            <ViewCell.ContextActions>
                                <MenuItem Text="Delete" IsDestructive="True" Clicked="MenuItemDelete_OnClicked" CommandParameter="{Binding .}"></MenuItem>
                                <MenuItem Text="Edit" IsDestructive="False" Clicked="MenuItemEdit_OnClicked" CommandParameter="{Binding .}"></MenuItem>
                            </ViewCell.ContextActions>
                        </ViewCell>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>
    </Grid>
</ContentPage>